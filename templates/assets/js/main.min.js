jQuery((e=>{e(document).ready((()=>{autosize(e("textarea")),t(),n(),o(),i(),a(),s(),c(),d(),m(),l(),r(),_()}));const t=()=>{const t=e(".scroll-up");let n;e(window).on("scroll resize",(()=>{n=e(window).scrollTop(),n>200?t.show():t.hide()})),t.on("click",(t=>{t.preventDefault(),e("html, body").animate({scrollTop:0},500)}))},n=()=>{const t=e(".popup"),n=e(".popup__block"),o=e(".popup__close"),i=e(".popupOpen");function a(){e("body").removeClass("no-scroll"),t.hide()}e(document).on("mouseup",(e=>{n.is(e.target)||0!==n.has(e.target).length||a()})),i.on("click",(function(t){let n=e(this).attr("href");(console.log(this),0!==e(n).length)&&(t.preventDefault(),e(n).fadeIn(),e("body").addClass("no-scroll"))})),o.on("click",(e=>{e.preventDefault(),a()}))},o=()=>{const t=e(".sidebar");e(".sidebar__toggle").on("click",(function(n){n.preventDefault();let o=e(this).attr("title"),i=e(this).attr("data-title-alt");e(this).attr("title",i),e(this).attr("data-title-alt",o),t.toggleClass("sidebar_opened")}))},i=()=>{e(".form").each((function(){e(this).validate()}))},a=()=>{const t=e(".geo__map svg"),n=e(".geo__region"),o=e(".geo__map-info");function i(i){let a=e('.geo__region[data-region="'+i+'"]').eq(0),s=a.find(".geo__region-name").text(),c=+a.find(".geo__region-count").text();n.removeClass("geo__region_active"),a.addClass("geo__region_active"),t.find("path").removeClass("active"),t.find('path[data-region="'+i+'"]').addClass("active").appendTo(t.find("path").parent()),o.hide(),o.find(".geo__map-num").text(c),c<1?o.find(".geo__map-num").addClass("geo__map-num_empty"):o.find(".geo__map-num").removeClass("geo__map-num_empty"),o.find(".geo__map-name span").text(s),o.attr("data-region",i).fadeIn()}n.on("click",(function(){let t=e(this).data("region");e(this).hasClass("geo__region_active")||i(t)})),t.find("path").on("mouseenter",(function(t){let n=e(t.target).data("region");n&&i(n)})),t.find("path").on("click",(function(){let t=e(this).data("href");t&&(window.location.href=t)}))},s=()=>{e("select").on("change",(function(){""===e(this).val()?e(this).removeClass("filled"):e(this).addClass("filled")}))},c=()=>{const t={showOtherMonths:!0,selectOtherMonths:!0,dateFormat:"dd.mm.yy",prevText:"",nextText:""};e('input[type="date"]').each((function(){e(this).attr("type","text").datepicker(t)}));const n=e("#export-from").datepicker(t).on("change",(function(){console.log(i(this)),o.datepicker("option","minDate",i(this))})),o=e("#export-to").datepicker(t).on("change",(function(){n.datepicker("option","maxDate",i(this))}));function i(n){let o;try{o=e.datepicker.parseDate(t.dateFormat,n.value)}catch(e){o=null}return o}},d=()=>{e(".dropdown .dropdown__title").on("click",(function(){e(this).parent().toggleClass("dropdown_active").find(".dropdown__content").slideToggle()}))},m=()=>{const t=e(".is-tabs").find(".tabs__link"),n=e(".is-tab-content"),o="tabs__link_active";t.on("click",(function(i){if(i.preventDefault(),e(this).hasClass(o))return;t.removeClass(o),e(this).addClass(o);let a=e(this).data("id");n.hide(),e('.is-tab-content[data-id="'+a+'"]').fadeIn()}))},l=()=>{const t=e(".is-menu"),n=t.find(".is-menu__item"),o=t.find(".is-menu__item-submenu li"),i=e(".is-menu-content"),a=e(".is-menu__toggle"),s=e(".is-menu__back"),c="is-menu__item_active";function d(e,t){n.removeClass(c),o.removeClass("active"),e.addClass(t)}function m(t){i.hide(),e('.is-menu-content[data-id="'+t+'"]').fadeIn()}a.on("click",(function(t){t.preventDefault(),e(this).parents(".is-menu").toggleClass("is-menu_closed")})),s.on("click",(()=>{e(".is-menu_another").hide(),e(".is-menu_main").fadeIn()})),n.on("click",(function(n){if(n.preventDefault(),e(this).hasClass("is-menu__item_has-submenu"))return;let o=e(this).data("id");if(e(this).hasClass("is-menu__item_another-menu"))return t.hide(),void e('.is-menu[data-id="'+o+'"]').fadeIn();d(e(this),c),m(o)})),o.on("click",(function(t){t.preventDefault();let n=e(this).data("id");d(e(this),"active"),m(n)}))},r=()=>{e(".copy-field__btn").on("click",(function(t){t.preventDefault();let n=e(this).parents(".copy-field"),o=n.find(".copy-field__content");n.append('<textarea id="tempTextarea">'+o.text().trim()+"</textarea>"),e("#tempTextarea").select(),document.execCommand("copy"),e("#tempTextarea").remove(),n.addClass("copy-field_copied"),setTimeout((()=>{n.removeClass("copy-field_copied")}),2e3)}))},_=()=>{const t=e(".comments__edit-form"),n=e(".comments__delete-form"),o=t.find("textarea");autosize.update(o),e(document).on("click",".comments-button",(()=>{e(".comments").addClass("comments_active")})),e(document).on("click",".comments__close",(()=>{e(".comments").removeClass("comments_active")})),e(document).on("click",".comment__edit",(function(){let n=e(this).parents(".comment"),i=n.attr("id"),a=n.find(".comment__content").text().trim();i&&(t.find('input[name="comment-id"]').val(i),t.find("textarea").val(a),setTimeout((()=>{autosize.update(o)}),1),t.hide().appendTo(n).fadeIn())})),e(document).on("click",".comment__delete",(function(){let t=e(this).parents(".comment"),o=t.attr("id");o&&(n.find(".comments__delete-form-submit").attr("data-comment_id",o),n.hide().appendTo(t).fadeIn())})),e(document).on("click",".comments__close-icon, .comments__delete-form-close",(function(o){o.preventDefault(),e(this).hasClass("comments__edit-form-close")?t.fadeOut((()=>{t.appendTo(".comments")})):e(this).hasClass("comments__delete-form-close")&&n.fadeOut((()=>{n.appendTo(".comments")}))})),e(document).on("submit",".comments__edit-form",(n=>{n.preventDefault();let o=t.find('input[name="comment-id"]').val(),i=t.find('textarea[name="comment"]').val(),a=e("#"+o);a.hide().find(".comment__content").text(i),t.hide().appendTo(".comments"),a.fadeIn()})),e(document).on("click",".comments__delete-form-submit",(function(o){o.preventDefault();let i=e(this).attr("data-comment_id"),a=e("#"+i);t.hide().appendTo(".comments"),n.hide().appendTo(".comments"),a.remove()}))}}));